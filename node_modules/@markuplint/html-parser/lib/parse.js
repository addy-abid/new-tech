"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = void 0;
const tslib_1 = require("tslib");
const create_tree_1 = require("./create-tree");
const flatten_nodes_1 = require("./flatten-nodes");
const parser_utils_1 = require("@markuplint/parser-utils");
const is_document_fragment_1 = tslib_1.__importDefault(require("./is-document-fragment"));
const parse = (rawCode, offsetOffset = 0, offsetLine = 0, offsetColumn = 0, isIgnoringFrontMatter) => {
    if (isIgnoringFrontMatter) {
        rawCode = parser_utils_1.ignoreFrontMatter(rawCode);
    }
    const isFragment = is_document_fragment_1.default(rawCode);
    const nodeTree = create_tree_1.createTree(rawCode, isFragment, offsetOffset, offsetLine, offsetColumn);
    const nodeList = flatten_nodes_1.flattenNodes(nodeTree, rawCode);
    return {
        nodeList,
        isFragment,
    };
};
exports.parse = parse;
