"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.I18n = void 0;
class I18n {
    constructor(localeSet) {
        this.localeSet = localeSet;
    }
    static create(localeSet) {
        if (!I18n._singleton) {
            I18n._singleton = new I18n(localeSet);
        }
        else {
            I18n._singleton.localeSet = localeSet;
        }
        return I18n._singleton;
    }
    translator() {
        const localeSet = this.localeSet;
        return (messageTmpl, ...keywords) => {
            let message = messageTmpl;
            if (localeSet) {
                const t = localeSet[messageTmpl];
                if (typeof t === 'string') {
                    messageTmpl = t;
                }
            }
            message = messageTmpl.replace(/\{([0-9]+)\}/g, ($0, $1) => {
                const keyword = `${keywords[+$1]}` || '';
                if (localeSet) {
                    return localeSet.keywords[keyword.toLowerCase()] || keyword;
                }
                return keyword;
            });
            return message;
        };
    }
}
exports.I18n = I18n;
I18n._singleton = null;
