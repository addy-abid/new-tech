import { AnonymousNode } from './types';
import { ExtendedSpec, MLMLSpec } from '@markuplint/ml-spec';
import { MLASTDocument } from '@markuplint/ml-ast';
import { MLDOMComment, MLDOMDoctype, MLDOMElement, MLDOMElementCloseTag, MLDOMText } from './tokens';
import { NodeStore } from './helper';
import { Walker } from './helper/walkers';
import { MLRule } from '../';
import { RuleConfigValue } from '@markuplint/ml-config';
import Ruleset from '../ruleset';
/**
 * markuplint DOM Document
 */
export default class MLDOMDocument<T extends RuleConfigValue, O = null> {
    #private;
    /**
     * An array of markuplint DOM nodes
     */
    nodeList: ReadonlyArray<AnonymousNode<T, O>>;
    /**
     *
     */
    currentRule: MLRule<T, O> | null;
    /**
     *
     */
    isFragment: boolean;
    /**
     *
     */
    specs: Readonly<MLMLSpec>;
    /**
     *
     */
    readonly nodeStore: NodeStore;
    /**
     * It could be used in rule, make sure it is immutable
     */
    get filename(): string | undefined;
    /**
     *
     * @param ast node list of markuplint AST
     * @param ruleset ruleset object
     */
    constructor(ast: MLASTDocument, ruleset: Ruleset, schemas: readonly [MLMLSpec, ...ExtendedSpec[]], filename?: string);
    get doctype(): MLDOMDoctype<T, O> | null;
    get tree(): AnonymousNode<T, O>[];
    walk(walker: Walker<T, O>): Promise<void>;
    /**
     *
     * @param type
     * @param walker
     * @param skipWhenRuleIsDisabled
     */
    walkOn(type: 'Element', walker: Walker<T, O, MLDOMElement<T, O>>, skipWhenRuleIsDisabled?: boolean): Promise<void>;
    walkOn(type: 'Text', walker: Walker<T, O, MLDOMText<T, O>>, skipWhenRuleIsDisabled?: boolean): Promise<void>;
    walkOn(type: 'Comment', walker: Walker<T, O, MLDOMComment<T, O>>, skipWhenRuleIsDisabled?: boolean): Promise<void>;
    walkOn(type: 'ElementCloseTag', walker: Walker<T, O, MLDOMElementCloseTag<T, O>>, skipWhenRuleIsDisabled?: boolean): Promise<void>;
    setRule(rule: MLRule<T, O> | null): void;
    matchNodes(query: string): MLDOMElement<T, O>[];
    toString(): string;
    private _init;
}
